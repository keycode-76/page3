const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/s1-DQRRcpaN.js","assets/s1-CKr4adUW.css"])))=>i.map(i=>d[i]);
(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const t of document.querySelectorAll('link[rel="modulepreload"]'))c(t);new MutationObserver(t=>{for(const o of t)if(o.type==="childList")for(const i of o.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&c(i)}).observe(document,{childList:!0,subtree:!0});function n(t){const o={};return t.integrity&&(o.integrity=t.integrity),t.referrerPolicy&&(o.referrerPolicy=t.referrerPolicy),t.crossOrigin==="use-credentials"?o.credentials="include":t.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function c(t){if(t.ep)return;t.ep=!0;const o=n(t);fetch(t.href,o)}})();const G="modulepreload",F=function(e){return"/page3/"+e},H={},O=function(s,n,c){let t=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const o=document.querySelector("meta[property=csp-nonce]"),i=o?.nonce||o?.getAttribute("nonce");t=Promise.all(n.map(a=>{if(a=F(a),a in H)return;H[a]=!0;const b=a.endsWith(".css"),g=b?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${g}`))return;const _=document.createElement("link");if(_.rel=b?"stylesheet":G,b||(_.as="script",_.crossOrigin=""),_.href=a,i&&_.setAttribute("nonce",i),document.head.appendChild(_),b)return new Promise((V,$)=>{_.addEventListener("load",V),_.addEventListener("error",()=>$(new Error(`Unable to preload CSS for ${a}`)))})}))}return t.then(()=>s()).catch(o=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=o,window.dispatchEvent(i),!i.defaultPrevented)throw o})};let C="EN";const q=document.querySelector("#EN"),B=document.querySelector("#CH"),K=document.querySelector(".EN"),W=document.querySelector(".CH"),M={EN:{set_language:"LANGUAGE",set_volume:"VOLUME",set_save:"SAVE",set_achievements:"Achievements",set_credits:"CREDITS",set_share:"SHARE",set_exit:"EXIT",lines_pass_btn:"SKIP",reject_reward_btn:"Reject All",end_turn_btn:"End Turn",end_retry:"Retry",bag_title:"Pocket",album_title:"Album",map_locat_title:"Location",object_buy_btn:"Buy",object_take_btn:"Take",object_sell_btn:"Sell",object_use_btn:"Use",object_delet_btn:"Delete",object_give_btn:"Give",object_ask_btn:"Ask",harvey:"Harvey",base:"Base",mechanic:"Mechanic",cook:"Cook",painter:"Painter"},CH:{set_language:"語言",set_volume:"音量",set_save:"保存",set_achievements:"成就",set_credits:"製作人員",set_share:"分享",set_exit:"退出",lines_pass_btn:"跳過",reject_reward_btn:"全部拒絕",end_turn_btn:"結束回合",end_retry:"重試",bag_title:"口袋",album_title:"相簿",map_locat_title:"地點",object_buy_btn:"購買",object_take_btn:"帶走",object_sell_btn:"出售",object_use_btn:"使用",object_delet_btn:"刪除",object_give_btn:"給予",object_ask_btn:"詢問",harvey:"哈維",base:"基地",mechanic:"機械師",cook:"廚子",painter:"漆工"}};q.addEventListener("click",()=>{C="EN",B.style.display="none",W.style.display="none",T()});B.addEventListener("click",()=>{C="CH",q.style.display="none",K.style.display="none",T()});const L=r("set_btn"),m=r("set_div"),w=r("set_volume","set_topic"),k=r("set_save","set_topic"),S=r("set_achievements","set_topic"),j=r("set_language","set_topic"),N=r("set_credits","set_topic"),P=r("set_share","set_topic"),A=r("set_exit","set_topic"),h=r("set_detail"),u=r("set_title"),p=r("set_label");r("save_slot_1");r("save_slot_2");const D=r("volume_add","volume_btn",">"),R=r("volume_sub","volume_btn","<"),I=r("volume_text",0,"1");m.append(w,k,S,j,N,P,A,h);m.style.zIndex=-1;m.style.display="none";function T(){let e=M[C];j.textContent=e.set_language,w.textContent=e.set_volume,k.textContent=e.set_save,S.textContent=e.set_achievements,N.textContent=e.set_credits,P.textContent=e.set_share,A.textContent=e.set_exit}T();let E=!1;const X=()=>{E?m.style.display="none":(m.style.display="flex",m.style.zIndex=1,L.style.zIndex=2),E=!E},v=()=>{h.innerHTML="",p.textContent="",h.append(u,p)};L.addEventListener("click",J(()=>{X()},300));function J(e,s=100){let n;return(...c)=>{clearTimeout(n),n=setTimeout(()=>e.apply(this,c),s)}}w.addEventListener("click",()=>{v(),u.textContent="Volume";const e=r("volume_div");e.innerHTML="",e.append(R,I,D),h.appendChild(e)});k.addEventListener("click",()=>{v(),u.textContent="Save Slot",p.textContent="Demo has no saving system"});S.addEventListener("click",()=>{v(),u.textContent="Achievements",Y()});j.addEventListener("click",()=>{v(),u.textContent="Language",p.textContent="English"});N.addEventListener("click",()=>{v(),u.textContent="Credits",p.textContent="Made by L"});P.addEventListener("click",()=>{v(),u.textContent="Share",p.textContent="https://heartfelt-starburst-a8e758.netlify.app/"});A.addEventListener("click",()=>{v(),u.textContent="Exit",p.textContent="To exit, just close the window"});let f=1,Q=5;D.addEventListener("click",()=>{f<Q&&(f+=1),I.textContent=String(f)});R.addEventListener("click",()=>{f>0&&(f-=1),I.textContent=String(f)});const Y=()=>{const e=r(0,"achieve_slot");e.textContent="die alone",h.appendChild(e)};function r(e,s,n){const c=document.createElement("div");return e&&(c.id=e),s&&(c.className=s),n&&(c.textContent=n),c}document.getElementById("click_to_start").addEventListener("click",()=>{Z()});let d={now_scene:0,now_end:0};const U=l("end_retry");function Z(){y(!0);const e=document.getElementById("game_container");e.innerHTML="";const s=l("background"),n=l("screen"),c=l("screen_border"),t=l("screen_bg"),o=l("screen_cover"),i=l("screen_ui"),a=l("scene"),b=l("scene_ux"),g=l("scene_bg");a.append(g,b),t.appendChild(a),n.append(c,t,o,i,U),n.append(m,L),e.append(s,n),z(),d.now_scene=1,x()}function x(){y(!0);const e=document.querySelector("#scene_bg");let s="";switch(d.now_scene){case 1:if(d.now_end===0)s=O(()=>import("./s1-DQRRcpaN.js"),__vite__mapDeps([0,1])),e.className="image_loader1";else if(d.now_end!==1){render_end(d.now_end);return}break;default:render_end(3);break}Promise.all([s,O(()=>import("./controller-D2t0Gaae.js"),[])]).then(async([n,c])=>{if(await n.s_init(),!n.s_data){console.error("s_data is undefined");return}const{user:t,new_scene:o,next_scene_btn:i}=c;t.start_locat=n.start_locat,t.map=n.mapData,t.scene_arr=n.s_data,t.line_arr=n.s_lines,t.npc_line=n.s_npc_line,t.harvey_line=n.s_harvey_line,t.hospital_line=n.s_hospital_line,t.landscape_line=n.s_landscape_line,t.golbal_arr=d,t.wall=1,t.line_id=0,e.addEventListener("animationend",a=>{a.animationName.includes("image_loader")&&(e.className="",y(!1),o(t.now_end,n.s_data))}),U.addEventListener("click",()=>{d.now_end=0,y(!1),x()}),i.addEventListener("click",()=>{d.now_scene=t.golbal_arr.now_scene,y(!1),x()})}).catch(n=>{console.error("Failed to load script:",n)})}function y(e){const s=document.getElementById("initializator");e?s.style.display="block":s.style.display="none"}function l(e,s,n){const c=document.createElement("div");return e&&(c.id=e),c}function z(){const e=window.innerWidth,s=window.innerHeight,n=document.querySelector("#screen");e*1.9<s?n.className="screen_portrait":n.className="screen_landscape"}window.addEventListener("resize",z);export{O as _,M as l,C as u};
